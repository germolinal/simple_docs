<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>What is SIMPLE?</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="what_is_simple.html" class="active"><strong aria-hidden="true">1.</strong> What is SIMPLE?</a></li><li class="chapter-item expanded "><a href="cant_we_keep_old.html"><strong aria-hidden="true">2.</strong> Can't we just improve existing tools?</a></li><li class="chapter-item expanded "><a href="getting_started.html"><strong aria-hidden="true">3.</strong> Getting started</a></li><li class="chapter-item expanded "><a href="simulating_for_people.html"><strong aria-hidden="true">4.</strong> Simulating for People</a></li><li class="chapter-item expanded affix "><li class="part-title">Input Output Reference Guide</li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="what-is-simple"><a class="header" href="#what-is-simple">What is <code>SIMPLE</code>?</a></h1>
<p>First and foremost, <code>SIMPLE</code> is a building berformance simulation tool that aims to satisfy
the present needs of this industry.</p>
<p>Digging deeper, <code>SIMPLE</code> can be seen from two perspectives.</p>
<ol>
<li><strong>Historical</strong> perspective, referring to the motivations and drivers that determined
its design and motivated me to develop it.</li>
<li><strong>Pragmatic</strong> perspective, associated with those cool features and benefits of <code>SIMPLE</code>
that I have been finding <em>during</em> it's development.</li>
</ol>
<blockquote>
<p>Arguibly, these <em>pragmatic</em> benefits might be present in any modern simulation tool... but considering
the low number of these, I guess they are pretty unique to <code>SIMPLE</code> anyway.</p>
</blockquote>
<h2 id="simples-origins--its-the-people-stupid"><a class="header" href="#simples-origins--its-the-people-stupid"><code>SIMPLE</code>'s origins — It's the people, stupid</a></h2>
<p>The development of <code>SIMPLE</code> was motivated by the results of my <a href="https://openaccess.wgtn.ac.nz/articles/thesis/Exploring_modelling_and_simulating_the_Feeling_of_Comfort_in_residential_settings/17085467/1">PhD Research</a>.
In these studies, I investigated what is it that <em>people</em>—not building scientists
or architects or engineers—mean by and expect from <em>a comfortable home</em>. In a single sentence, my finidings
suggest that our understanding of building physics far outpaces our knowledge of how people
interact with buildings. This gap is only going to widen unless we invest resources in understanding
humans.</p>
<p>Let put it this way:</p>
<ol>
<li><strong>Materials have been/will be getting better</strong> which means that, for instance, closed doors and windows are really good at
preventing air leakage and heat transfer. Therefore, building controls and human behaviour greatly implact
the building's performance, and the health and comfort of the people in it.</li>
<li><strong>Software have been/will be getting better</strong>, meaning that we can—for instance—predict and understand the effects of an open/closed window better than ever before</li>
<li><strong>Our understanding of people is not catching up</strong>, meaning that ww are not certain of whether windows and doors are open or not.</li>
</ol>
<blockquote>
<p><strong>Note that</strong> point 3 is not suggesting that nothing has been done about understanding people. However,
I would argue that our current tools to study people are not the best. This should be more clear later in this section.</p>
</blockquote>
<p>This is a problem because buildings are built for people. Therefore, not understanding people implies not understanding the performance of buildings. Understanding <em>when</em> and <em>why</em> people choose to open
windows requires tools that will let us properly research and evaluate human comfort
and behaviour.</p>
<p>Below are the three main elements of <code>SIMPLE</code> that make it better at simulating buildings
for real people.</p>
<h3 id="1-it-was-designed-to-allow-for-holistic-simulations"><a class="header" href="#1-it-was-designed-to-allow-for-holistic-simulations">1. It was designed to allow for holistic simulations</a></h3>
<p>The motivation for performing holistic simulations is kind of obvious: when people get into a room, they just
<em>feel</em> it. In other words, <strong>people do not separate—as software and building scientists do—the
Thermal from the Daylight from the Acoustic domains</strong>. This means that,
if we want to trully incorporate people's behaviour and comfort into our simulations, we need to account
for multiple domains at the same time, <strong>at run time</strong>.</p>
<blockquote>
<p><strong>At run time means</strong> that it is not enough to run three simulations (one for thermal, one for acoustic, one for
lighting) without considering the interaction between these domains.</p>
</blockquote>
<p>So far, <code>SIMPLE</code> is actually quite good at Lighting and Thermal simulation, even though this feature has not been
fully utilised. For instance, the following figure is evidence of how good it can calculate lighting
and how well it compares to <a href="https://energyplus.net">Energy Plus</a> in therms of temperature estimations.</p>
<div class="table-wrapper"><table><thead><tr><th>Lighting simulation</th><th>Thermal simulation</th></tr></thead><tbody>
<tr><td><img src="images/cornell_glass.png" alt="Cornell" /></td><td><img src="images/SIMPLEvsEPlus.png" alt="SIMPLE vs Energy Plus" /></td></tr>
</tbody></table>
</div>
<p>In order to allow for holistic simulations, we developed an architecture where different modules would connect to a single—domain agnostic—api. This API is the <code>SIMPLE Model</code>, and it allows any developer to say <em>"Hey, give me the temperature of this room"</em> without knowing <em>how</em> this value was calculated. In a similar manner, it allows these developers to make available values for other modules to use.</p>
<p><img src="./images/holistic_architecture.png" alt="SIMPLE&#39;s architecture" /></p>
<h3 id="2-it-was-designed-to-give-some-room-for-peoples-lives"><a class="header" href="#2-it-was-designed-to-give-some-room-for-peoples-lives">2. It was designed to give some room for people's lives</a></h3>
<p>People are not simple. They do not just say <em>"it is cold, I will turn the heater on"</em>
in a deterministic manner. They take into account things like budget, bills, whether
they are alone, and whether they have kids. Modelling this kind of
behaviour calls for a much more flexible way of modelling control algorithms (yes, I am
treating human behaviour as a control algorithm).</p>
<p>This is actually addressed in the same way as point 1 (i.e., Holistic simulations), in
the sense that a new module could be created to deal with "Budget" or "Safety" and then
use the same API to read and write values.</p>
<h3 id="3-it-was-designed-to-travel-in-time"><a class="header" href="#3-it-was-designed-to-travel-in-time">3. It was designed to travel in time</a></h3>
<p><code>SIMPLE</code> was designed with the purpose of acknowledging that <strong>people are constantly aware of their future</strong>.
This is kind of obvious (e.g., you put a jacket <em>before</em> going out, not after) but our simulation tools tend
to make it hard to implement this feature.</p>
<p>Allowing the simulation to travel in time is not trivial, as it means that—at every time step of the simulation—we
need to estimate what will happen in the future and then return to the present.</p>
<p>From a simulation perspective, this implies</p>
<ol>
<li>Gathering a bunch of potential actions to take</li>
<li>Execute each action, simulating some time into the future, record the results, and erase</li>
<li>From the results of all actions, identify the best decision to take, if any.</li>
</ol>
<p><img src="./images/time_traveling.png" alt="Time traveling" /></p>
<p><code>SIMPLE</code> deals with this challenge by separating the <code>Simulation State</code> (i.e., the values that
describe the physical state of the building and therefore change during the simulation) from the model (i.e., which
is constant throughout the simulation). From a software perspective, the structure representing
the model is <em>immutable</em> while the state is <em>mutable</em>.</p>
<p>The whole point of this architecture is that the <code>Simulation State</code> happens to be
a relatively small and cheap-to-copy structure (it is an array of floating point numbers).
This implies that <strong>during a simulation</strong>, we can create copy, then simulate, and then
destroy this copy without much loss of performance.</p>
<h2 id="beyond-people--benefits-of-a-modern-tool"><a class="header" href="#beyond-people--benefits-of-a-modern-tool">Beyond people — benefits of a modern tool</a></h2>
<p>Having a modern simulation tool offers several benefits. However, it is important to also acknowledge the
general benefits that come built-in from designing a tool that helps design buildings for people:</p>
<ol>
<li><strong>Holistic simulations</strong> let us optimize multi-domain control algorithms that might lead to more
optimal performance of buildings.</li>
<li><strong>Traveling in time</strong> allows us to implement Model Predictive Control, at runtime, in production,
as part of a real EMS system.</li>
</ol>
<p>And, of course, there are other benefits.</p>
<h3 id="1-it-allows-easily-defining-complex-control-algorithms"><a class="header" href="#1-it-allows-easily-defining-complex-control-algorithms">1. It allows easily defining complex control algorithms</a></h3>
<p><code>SIMPLE</code> can ingest control algorithms as scripts. This allows for a much richer and flexible
way of writing algoritghms than through schedules. or other common methods.</p>
<pre><code class="language-rs">let kids_bedroom = space("Kids Bedroom");
let kids_heater = hvac("Kids heater");
let kids_window = fenestration("kids window");

let window_is_open = kids_window.open_fraction &gt; 0.0
let temperature = kids_bedroom.dry_bulb_temperature;
let is_cold = temperature &lt; 19
let is_hot = temperature &gt; 25

let outside_temperature = kids_window.front_temperature

if is_hot &amp;&amp; outside_temperature &lt; inside_temperature  {
    if random() &lt; 0.7 {
        // 70% chance of opening windows
        kids_window.open_fraction = 1
    }
} else if is_cold &amp;&amp; outside_temperature &gt; inside_temperature {
    if random() &lt; 0.3 {
        // 30% chance of ventilating
        kids_window.open_fraction = 1
    }
} else {
    if random() &lt; 0.5{
        // 50% of opening windows to balance temperatures
        kids_window.open_fraction = 1
    }
}


// Do something else...

</code></pre>
<h3 id="2-you-can-store-and-reuse-the-solar-calculations"><a class="header" href="#2-you-can-store-and-reuse-the-solar-calculations">2. You can store and reuse the solar calculations</a></h3>
<p>Optical calculations—like those required for estimating the amount of sun or light that reaches each
surface—can be computationally expensive. Because of this, it is common to pre-calculate as much
as possible <em>before</em> the simulation starts, and then reuse this data when advancing through time.</p>
<p><code>SIMPLE</code> goes one step ahead and allows you to save this data, and then reuse it in succeding
simulations. (This data is valid as long as the geometry and materials of the model remain the same.)</p>
<pre><code class="language-rs">SolarOptions {
    optical_data_path: "./path/to/solar/data.json",
    // ... other options
}
</code></pre>
<p>Some applications of this are the following:</p>
<ol>
<li>We had <code>SIMPLE</code> deployed on the cloud, and used it to run simulations on-demand. Keeping the solar
data on a database meant that we did not have to recalculate it, significantly reducing response time
and computational expenses.</li>
<li>Optimising non-geometric elements (e.g., insulation thickness, size of heaters, luminaire placements, etc.)
does not imply changes in geometry. This means that every step of the optimisation will be shorter.</li>
</ol>
<blockquote>
<p><strong>Note:</strong> A very common example of this technique is the Daylight Coefficients, which is the technique that
<code>SIMPLE</code> utilises to calculate the amount of solar radiation reaching each surface. The figure
below shows how <code>SIMPLE</code>'s results compare to those of EnergyPlus, which uses a completely different
technique.
<img src="./images/incident_solar.png" alt="Solar Radiation" /></p>
</blockquote>
<h3 id="3-you-can-save-the-current-state-of-the-simulation"><a class="header" href="#3-you-can-save-the-current-state-of-the-simulation">3. You can save the current state of the simulation</a></h3>
<blockquote>
<p><em>This is possible, but not yet implemented</em></p>
</blockquote>
<p>Given that the <code>Simulation State</code> is a relatively small, independent object,
it can be conveniently stored in a database or text file. This enables the
pausing and restarting of simulations, offering flexibility for various applications.</p>
<p>This feature can potentially be particularly beneficial for integrating <code>SIMPLE</code> with
Energy Management Systems (EMS). By periodically running simulations,
EMS systems can update the building's current state and determine the most o
ptimal control strategy, such as Model Predictive Control.</p>
<h3 id="4-deploy-it-to-modern-infrastructure"><a class="header" href="#4-deploy-it-to-modern-infrastructure">4. Deploy it to modern infrastructure</a></h3>
<p><code>SIMPLE</code> is a modern tool, written in a modern language, and that can run in
multiple environments.</p>
<div class="table-wrapper"><table><thead><tr><th>Environment</th><th>Example</th></tr></thead><tbody>
<tr><td><strong>Run locally</strong></td><td>Being a pure <code>RUST</code> program, can be compiled to run on Windows, Linux and MacOS (has been tested on Linux and Mc).</td></tr>
<tr><td><strong>Web Assembly</strong></td><td>Run it on a browser, without the need for servers. <a href="http://buildingsforpeople.org/simple_demo/">CHECK THIS EXAMPLE</a></td></tr>
<tr><td><strong>On the cloud</strong></td><td>Embed <code>SIMPLE</code> into a web server and release it into <a href="https://github.com/GoogleContainerTools/distroless">very small and secure containers</a></td></tr>
<tr><td><strong>On location</strong></td><td>(<em>not tested</em>) Compile <code>SIMPLE</code> in a Raspberry PI or similar machine, and put it to work as part of the EMS</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="introduction.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="cant_we_keep_old.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="introduction.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="cant_we_keep_old.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
